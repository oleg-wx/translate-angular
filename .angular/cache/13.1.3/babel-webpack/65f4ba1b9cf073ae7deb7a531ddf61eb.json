{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Optional, Inject, Directive, Input, Pipe, APP_INITIALIZER, NgModule } from '@angular/core';\nimport { Translations } from 'simply-translate';\nimport { BehaviorSubject, Subject, tap, lastValueFrom } from 'rxjs';\nimport { v4 } from 'uuid';\nconst DEFAULT_OPTIONS = new InjectionToken('TranslateService DEFAULT_OPTIONS');\n\nclass TranslateService {\n  constructor(options) {\n    this.langChangeSubj = new BehaviorSubject({});\n    this.dictionarySubj = new Subject();\n    this.languageChange$ = this.langChangeSubj.asObservable();\n    this.dictionaryChange$ = this.dictionarySubj.asObservable();\n    const cd = options ? options.cacheDynamic : false;\n    this.service = new Translations({}, {\n      cacheDynamic: (options === null || options === void 0 ? void 0 : options.cacheDynamic) !== false,\n      $less: !!(options === null || options === void 0 ? void 0 : options.$less)\n    });\n  }\n\n  set defaultLang(val) {\n    this.service.defaultLang = val;\n    this.langChangeSubj.next({\n      defaultLang: this.defaultLang,\n      fallbackLang: this.fallbackLang\n    });\n  }\n\n  get defaultLang() {\n    return this.service.defaultLang;\n  }\n\n  set fallbackLang(val) {\n    this.service.fallbackLang = val;\n    this.langChangeSubj.next({\n      defaultLang: this.defaultLang,\n      fallbackLang: this.fallbackLang\n    });\n  }\n\n  get fallbackLang() {\n    return this.service.fallbackLang;\n  }\n\n  translateTo(lang, key, dynamicValuesOrFallback, fallback) {\n    return this.service.translateTo(lang, key, dynamicValuesOrFallback, fallback);\n  }\n\n  translate(key, dynamicValuesOrFallback, fallback) {\n    return this.service.translate(key, dynamicValuesOrFallback, fallback);\n  }\n\n  extendDictionary(lang, dictionary) {\n    this.service.extendDictionary(lang, dictionary);\n    this.dictionarySubj.next();\n  }\n\n}\n\nTranslateService.ɵfac = function TranslateService_Factory(t) {\n  return new (t || TranslateService)(i0.ɵɵinject(DEFAULT_OPTIONS, 8));\n};\n\nTranslateService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: TranslateService,\n  factory: TranslateService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TranslateService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [DEFAULT_OPTIONS]\n      }]\n    }];\n  }, null);\n})();\n\nclass TranslateDirective {\n  constructor(element, service) {\n    this.element = element;\n    this.service = service;\n    this._init = false;\n  }\n\n  ngOnInit() {\n    this._init = true;\n  }\n\n  ngOnChanges(changes) {\n    if (!this._init) this._fb = this.element.nativeElement.innerText;\n\n    if (changes._key.currentValue) {\n      this.element.nativeElement.innerText = this.service.translateTo(this._to || this.service.defaultLang, this._key, this._values, this._fb);\n    } else if (changes._fb.currentValue !== this.element.nativeElement.innerText) {\n      this.element.nativeElement.innerText = this._fb || '';\n    }\n  }\n\n}\n\nTranslateDirective.ɵfac = function TranslateDirective_Factory(t) {\n  return new (t || TranslateDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(TranslateService));\n};\n\nTranslateDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: TranslateDirective,\n  selectors: [[\"\", \"translate\", \"\"]],\n  inputs: {\n    _key: [\"translate\", \"_key\"],\n    _to: [\"to\", \"_to\"],\n    _values: [\"values\", \"_values\"]\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TranslateDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[translate]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: TranslateService\n    }];\n  }, {\n    _key: [{\n      type: Input,\n      args: ['translate']\n    }],\n    _to: [{\n      type: Input,\n      args: ['to']\n    }],\n    _values: [{\n      type: Input,\n      args: ['values']\n    }]\n  });\n})();\n\nclass TranslatePipe {\n  constructor(service) {\n    this.service = service;\n  }\n\n  transform(key, dynamicOrFallback, fallback) {\n    if (key == null || key === '') {\n      return '';\n    }\n\n    const result = this.service.translate(key, dynamicOrFallback, fallback);\n    return result;\n  }\n\n}\n\nTranslatePipe.ɵfac = function TranslatePipe_Factory(t) {\n  return new (t || TranslatePipe)(i0.ɵɵdirectiveInject(TranslateService, 16));\n};\n\nTranslatePipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n  name: \"translate\",\n  type: TranslatePipe,\n  pure: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TranslatePipe, [{\n    type: Pipe,\n    args: [{\n      name: 'translate'\n    }]\n  }], function () {\n    return [{\n      type: TranslateService\n    }];\n  }, null);\n})();\n\nclass TranslateToPipe {\n  constructor(service) {\n    this.service = service;\n  }\n\n  transform(key, lang, dynamicOrFallback, fallback) {\n    if (key == null || key === '') {\n      return '';\n    }\n\n    const result = this.service.translateTo(lang, key, dynamicOrFallback, fallback);\n    return result;\n  }\n\n}\n\nTranslateToPipe.ɵfac = function TranslateToPipe_Factory(t) {\n  return new (t || TranslateToPipe)(i0.ɵɵdirectiveInject(TranslateService, 16));\n};\n\nTranslateToPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n  name: \"translateTo\",\n  type: TranslateToPipe,\n  pure: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TranslateToPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'translateTo'\n    }]\n  }], function () {\n    return [{\n      type: TranslateService\n    }];\n  }, null);\n})();\n\nfunction factory(init) {\n  var ret = (service, ...deps) => {\n    return function () {\n      if (init) {\n        var res = init(service, ...deps);\n        res = res.pipe(tap(dics => {\n          Object.keys(dics).forEach(key => {\n            service.extendDictionary(key, dics[key]);\n          });\n        }));\n        return lastValueFrom(res);\n      }\n\n      return Promise.resolve();\n    };\n  };\n\n  return ret;\n}\n\nfunction forRootGuard(service) {\n  if (service) {\n    throw new Error(`TranslateModule.forRoot() called twice. Lazy loaded modules should use TranslateModule.forChild() instead.`);\n  }\n\n  return 'guarded';\n}\n\nconst S_TRANSLATE = new InjectionToken('S_TRANSLATE');\n\nclass TranslateModule {\n  static forRoot(config) {\n    return {\n      ngModule: TranslateModule,\n      providers: [TranslateService, {\n        provide: DEFAULT_OPTIONS,\n        useValue: {\n          cacheDynamic: (config === null || config === void 0 ? void 0 : config.cacheDynamic) !== undefined ? !!(config === null || config === void 0 ? void 0 : config.cacheDynamic) : true,\n          $less: (config === null || config === void 0 ? void 0 : config.$less) !== undefined ? !!(config === null || config === void 0 ? void 0 : config.$less) : false\n        }\n      }, {\n        provide: APP_INITIALIZER,\n        useFactory: factory(config.init),\n        deps: config.deps !== undefined ? [TranslateService, ...config.deps] : [TranslateService],\n        multi: true\n      }]\n    };\n  }\n\n  static forChild(config) {\n    var _a;\n\n    return {\n      ngModule: TranslateModule,\n      providers: [{\n        provide: S_TRANSLATE,\n        useValue: {\n          id: ((_a = config === null || config === void 0 ? void 0 : config.id) === null || _a === void 0 ? void 0 : _a.trim()) || v4(),\n          init: (config === null || config === void 0 ? void 0 : config.extend) ? config.extend : undefined\n        }\n      }]\n    };\n  }\n\n}\n\nTranslateModule.ɵfac = function TranslateModule_Factory(t) {\n  return new (t || TranslateModule)();\n};\n\nTranslateModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: TranslateModule\n});\nTranslateModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TranslateModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [TranslatePipe, TranslateToPipe, TranslateDirective],\n      imports: [],\n      exports: [TranslatePipe, TranslateToPipe, TranslateDirective],\n      bootstrap: []\n    }]\n  }], null, null);\n})();\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { DEFAULT_OPTIONS, S_TRANSLATE, TranslateDirective, TranslateModule, TranslatePipe, TranslateService, TranslateToPipe, factory, forRootGuard };","map":{"version":3,"sources":["D:/Pro/Git/HUB/translate-angular/dist/translate/fesm2015/simply-translate-angular.mjs"],"names":["i0","InjectionToken","Injectable","Optional","Inject","Directive","Input","Pipe","APP_INITIALIZER","NgModule","Translations","BehaviorSubject","Subject","tap","lastValueFrom","v4","DEFAULT_OPTIONS","TranslateService","constructor","options","langChangeSubj","dictionarySubj","languageChange$","asObservable","dictionaryChange$","cd","cacheDynamic","service","$less","defaultLang","val","next","fallbackLang","translateTo","lang","key","dynamicValuesOrFallback","fallback","translate","extendDictionary","dictionary","ɵfac","ɵprov","type","undefined","decorators","args","TranslateDirective","element","_init","ngOnInit","ngOnChanges","changes","_fb","nativeElement","innerText","_key","currentValue","_to","_values","ElementRef","ɵdir","selector","TranslatePipe","transform","dynamicOrFallback","result","ɵpipe","name","TranslateToPipe","factory","init","ret","deps","res","pipe","dics","Object","keys","forEach","Promise","resolve","forRootGuard","Error","S_TRANSLATE","TranslateModule","forRoot","config","ngModule","providers","provide","useValue","useFactory","multi","forChild","_a","id","trim","extend","ɵmod","ɵinj","declarations","imports","exports","bootstrap"],"mappings":"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","sourcesContent":["import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Optional, Inject, Directive, Input, Pipe, APP_INITIALIZER, NgModule } from '@angular/core';\nimport { Translations } from 'simply-translate';\nimport { BehaviorSubject, Subject, tap, lastValueFrom } from 'rxjs';\nimport { v4 } from 'uuid';\n\nconst DEFAULT_OPTIONS = new InjectionToken('TranslateService DEFAULT_OPTIONS');\r\nclass TranslateService {\r\n    constructor(options) {\r\n        this.langChangeSubj = new BehaviorSubject({});\r\n        this.dictionarySubj = new Subject();\r\n        this.languageChange$ = this.langChangeSubj.asObservable();\r\n        this.dictionaryChange$ = this.dictionarySubj.asObservable();\r\n        const cd = options ? options.cacheDynamic : false;\r\n        this.service = new Translations({}, { cacheDynamic: (options === null || options === void 0 ? void 0 : options.cacheDynamic) !== false, $less: !!(options === null || options === void 0 ? void 0 : options.$less) });\r\n    }\r\n    set defaultLang(val) {\r\n        this.service.defaultLang = val;\r\n        this.langChangeSubj.next({ defaultLang: this.defaultLang, fallbackLang: this.fallbackLang });\r\n    }\r\n    get defaultLang() {\r\n        return this.service.defaultLang;\r\n    }\r\n    set fallbackLang(val) {\r\n        this.service.fallbackLang = val;\r\n        this.langChangeSubj.next({ defaultLang: this.defaultLang, fallbackLang: this.fallbackLang });\r\n    }\r\n    get fallbackLang() {\r\n        return this.service.fallbackLang;\r\n    }\r\n    translateTo(lang, key, dynamicValuesOrFallback, fallback) {\r\n        return this.service.translateTo(lang, key, dynamicValuesOrFallback, fallback);\r\n    }\r\n    translate(key, dynamicValuesOrFallback, fallback) {\r\n        return this.service.translate(key, dynamicValuesOrFallback, fallback);\r\n    }\r\n    extendDictionary(lang, dictionary) {\r\n        this.service.extendDictionary(lang, dictionary);\r\n        this.dictionarySubj.next();\r\n    }\r\n}\r\nTranslateService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateService, deps: [{ token: DEFAULT_OPTIONS, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\r\nTranslateService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateService });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateService, decorators: [{\r\n            type: Injectable\r\n        }], ctorParameters: function () {\r\n        return [{ type: undefined, decorators: [{\r\n                        type: Optional\r\n                    }, {\r\n                        type: Inject,\r\n                        args: [DEFAULT_OPTIONS]\r\n                    }] }];\r\n    } });\n\nclass TranslateDirective {\r\n    constructor(element, service) {\r\n        this.element = element;\r\n        this.service = service;\r\n        this._init = false;\r\n    }\r\n    ngOnInit() {\r\n        this._init = true;\r\n    }\r\n    ngOnChanges(changes) {\r\n        if (!this._init)\r\n            this._fb = this.element.nativeElement.innerText;\r\n        if (changes._key.currentValue) {\r\n            this.element.nativeElement.innerText = this.service.translateTo(this._to || this.service.defaultLang, this._key, this._values, this._fb);\r\n        }\r\n        else if (changes._fb.currentValue !== this.element.nativeElement.innerText) {\r\n            this.element.nativeElement.innerText = this._fb || '';\r\n        }\r\n    }\r\n}\r\nTranslateDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateDirective, deps: [{ token: i0.ElementRef }, { token: TranslateService }], target: i0.ɵɵFactoryTarget.Directive });\r\nTranslateDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.2\", type: TranslateDirective, selector: \"[translate]\", inputs: { _key: [\"translate\", \"_key\"], _to: [\"to\", \"_to\"], _values: [\"values\", \"_values\"] }, usesOnChanges: true, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[translate]',\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: TranslateService }]; }, propDecorators: { _key: [{\r\n                type: Input,\r\n                args: ['translate']\r\n            }], _to: [{\r\n                type: Input,\r\n                args: ['to']\r\n            }], _values: [{\r\n                type: Input,\r\n                args: ['values']\r\n            }] } });\n\nclass TranslatePipe {\r\n    constructor(service) {\r\n        this.service = service;\r\n    }\r\n    transform(key, dynamicOrFallback, fallback) {\r\n        if (key == null || key === '') {\r\n            return '';\r\n        }\r\n        const result = this.service.translate(key, dynamicOrFallback, fallback);\r\n        return result;\r\n    }\r\n}\r\nTranslatePipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslatePipe, deps: [{ token: TranslateService }], target: i0.ɵɵFactoryTarget.Pipe });\r\nTranslatePipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslatePipe, name: \"translate\" });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslatePipe, decorators: [{\r\n            type: Pipe,\r\n            args: [{ name: 'translate' }]\r\n        }], ctorParameters: function () { return [{ type: TranslateService }]; } });\r\nclass TranslateToPipe {\r\n    constructor(service) {\r\n        this.service = service;\r\n    }\r\n    transform(key, lang, dynamicOrFallback, fallback) {\r\n        if (key == null || key === '') {\r\n            return '';\r\n        }\r\n        const result = this.service.translateTo(lang, key, dynamicOrFallback, fallback);\r\n        return result;\r\n    }\r\n}\r\nTranslateToPipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateToPipe, deps: [{ token: TranslateService }], target: i0.ɵɵFactoryTarget.Pipe });\r\nTranslateToPipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateToPipe, name: \"translateTo\" });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateToPipe, decorators: [{\r\n            type: Pipe,\r\n            args: [{ name: 'translateTo' }]\r\n        }], ctorParameters: function () { return [{ type: TranslateService }]; } });\n\nfunction factory(init) {\r\n    var ret = (service, ...deps) => {\r\n        return function () {\r\n            if (init) {\r\n                var res = init(service, ...deps);\r\n                res = res.pipe(tap((dics) => {\r\n                    Object.keys(dics).forEach((key) => {\r\n                        service.extendDictionary(key, dics[key]);\r\n                    });\r\n                }));\r\n                return lastValueFrom(res);\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n    };\r\n    return ret;\r\n}\r\nfunction forRootGuard(service) {\r\n    if (service) {\r\n        throw new Error(`TranslateModule.forRoot() called twice. Lazy loaded modules should use TranslateModule.forChild() instead.`);\r\n    }\r\n    return 'guarded';\r\n}\r\nconst S_TRANSLATE = new InjectionToken('S_TRANSLATE');\r\nclass TranslateModule {\r\n    static forRoot(config) {\r\n        return {\r\n            ngModule: TranslateModule,\r\n            providers: [\r\n                TranslateService,\r\n                {\r\n                    provide: DEFAULT_OPTIONS,\r\n                    useValue: {\r\n                        cacheDynamic: (config === null || config === void 0 ? void 0 : config.cacheDynamic) !== undefined ? !!(config === null || config === void 0 ? void 0 : config.cacheDynamic) : true,\r\n                        $less: (config === null || config === void 0 ? void 0 : config.$less) !== undefined ? !!(config === null || config === void 0 ? void 0 : config.$less) : false,\r\n                    },\r\n                },\r\n                {\r\n                    provide: APP_INITIALIZER,\r\n                    useFactory: factory(config.init),\r\n                    deps: config.deps !== undefined ? [TranslateService, ...config.deps] : [TranslateService],\r\n                    multi: true,\r\n                },\r\n            ],\r\n        };\r\n    }\r\n    static forChild(config) {\r\n        var _a;\r\n        return {\r\n            ngModule: TranslateModule,\r\n            providers: [\r\n                {\r\n                    provide: S_TRANSLATE,\r\n                    useValue: { id: ((_a = config === null || config === void 0 ? void 0 : config.id) === null || _a === void 0 ? void 0 : _a.trim()) || v4(), init: (config === null || config === void 0 ? void 0 : config.extend) ? config.extend : undefined },\r\n                },\r\n            ],\r\n        };\r\n    }\r\n}\r\nTranslateModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nTranslateModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateModule, declarations: [TranslatePipe, TranslateToPipe, TranslateDirective], exports: [TranslatePipe, TranslateToPipe, TranslateDirective] });\r\nTranslateModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateModule, imports: [[]] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: TranslateModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    declarations: [TranslatePipe, TranslateToPipe, TranslateDirective],\r\n                    imports: [],\r\n                    exports: [TranslatePipe, TranslateToPipe, TranslateDirective],\r\n                    bootstrap: [],\r\n                }]\r\n        }] });\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { DEFAULT_OPTIONS, S_TRANSLATE, TranslateDirective, TranslateModule, TranslatePipe, TranslateService, TranslateToPipe, factory, forRootGuard };\n"]},"metadata":{},"sourceType":"module"}